# downloaded for hyprland:
# hyprland https://wiki.hyprland.org/hyprland-wiki/
# hyprpaper
# kitty
# waybar
# wofi
# nemo
# dunst
# xsettingsd https://github.com/derat/xsettingsd/wiki
# tldr
# brightnessctl
# pamixer
# blueberry
# pavucontrol
# gnome-system-monitor
# gnome-clocks
# baobab
# gnome-disk-utility
# https://github.com/material-ocean/
# wireplumber
# pipewire
# pipewire-pulse
# polkit-kde-agent
# qt5-wayland
# qt6-wayland
# xdg-desktop-portal-hyprland
# xdg-desktop-portal-gtk
# grim
# slurp
# wine wine-gecko wine-mono lib32-pipewire pipewire-pulse lib32-libpulse proton lutris winetricks steam

# To add in future:
# hyprlock
# hypridle
# wluma
# wgammarelay

source = ./environmentVars.conf

# See https://wiki.hyprland.org/Configuring/Monitors/
monitor = eDP-1, 2880x1800@90, auto, 1, bitdepth, 10

# default order: (laptop display -> HDMI -> back usb-c)
# front usb not tested, assumed after back given name
# Names:
# eDP-1     : laptop display
# Still need to test the rest
monitor = , preferred, auto, 1 # generic monitor


# See https://wiki.hyprland.org/Configuring/Keywords/ for more

# Execute once on launch
# Admin
$dbus_env = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
$key_rng = gnome-keyring-daemon --start --components=secrets
$su_auth = /usr/lib/polkit-kde-authentication-agent-1
$su_clip_txt = wl-paste --type text --watch cliphist store
$su_clip_img = wl-paste --type image --watch cliphist store

# Themeing
$su_cursor = hyprctl setcursor Bibata-Modern-Classic 10
$gnome_buttons = gsettings set org.gnome.desktop.wm.preferences button-layout :
$su_bg = hyprpaper -c /home/penguin/.config/hypr/hyprpaper.conf

# Hardware
$su_nobuzz = pactl unload-module module-suspend-on-idle

# Scripts
$su_notifs = /usr/bin/dunst -conf ~/.config/dunst/dunstrc/dunstrc 
$battery_script = /home/penguin/.config/hypr/battery_notification.sh
$su_waybar = waybar
$app_fix = /home/penguin/.config/hypr/app_startup_fix.sh

exec-once = $dbus_env & $key_rng & $su_auth & $su_clip_txt & $su_clip_img
exec-once = $su_cursor & $gnome_buttons & $su_bg
exec-once = $su_nobuzz
exec-once = $su_notifs & $battery_script & $su_waybar & $app_fix


# Emergency keybinds in main conf file
# These WILL NOT work in submaps
# keep a kitty all the time
# and in every submap
bind = SUPER ALT SHIFT, M , exit,
bind = SUPER          , Q , exec, kitty
bind =       ALT      , f4, killactive,

# keybindings cheat sheet script (WIP)
bind = SUPER ALT, 1, exec, python3 /home/penguin/.config/hypr/keybinds/KeybindingHintWindow.py


# Colors
source = ~/.config/hypr/colors.conf

# keybinds
source = ~/.config/hypr/keybinds/keybindings.conf

# damage_tracking = full

# For all categories, see https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout = us
    # kb_variant =
    # kb_model =
    # kb_options =
    # kb_rules =

    numlock_by_default = true

    repeat_rate = 40
    repeat_delay = 400

    follow_mouse = 2

    touchpad {
        middle_button_emulation = false
        clickfinger_behavior = true

        tap-to-click = true

        drag_lock = true
        tap-and-drag = true

        disable_while_typing = true

        natural_scroll = true
        scroll_factor = 0.5
    }

    sensitivity = 1.0 # [-1.0, 1.0], 0 means no modification.
    accel_profile = flat
    force_no_accel = false

    left_handed = false
    
    scroll_method = 2fg
}


binds {
    # allow_workspace_cycles = true
}


# Window name regex vars
$win_float = (kitty)|(qalculate)|(blueberry.py)|(nm-connection-editor)|(pavucontrol)|(org.gnome.clocks)|(gnome-system-monitor)|(org.kde.polkit-kde-authentication-agent-1)$
$win_opacity = (kitty)|(qalculate)|(blueberry.py)|(nm-connection-editor)|(pavucontrol)|(org.gnome.clocks)|(gnome-system-monitor)$
$win_center_cursor = (kitty)|(qalculate)|(org.kde.polkit-kde-authentication-agent-1)$
$win_big = (blueberry.py)|(nm-connection-editor)|(pavucontrol)|(gnome-system-monitor)$
$win_medium = (kitty)|(qalculate)|(org.gnome.clocks)$
$win_small = (org.kde.polkit-kde-authentication-agent-1)$
general {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more

    gaps_in = -1
    gaps_out = -1
    gaps_workspaces = 2

    border_size = 1
    no_border_on_floating = false

    col.active_border = $act_bor
    col.inactive_border = $inact_bor

    # col.nogroup_border_active
    # col.nogroup_border

    layout = dwindle
    
    no_cursor_warps = false
    cursor_inactive_timeout = 10
    apply_sens_to_raw = false
    
    no_focus_fallback = false

    resize_on_border = false
    extend_border_grab_area = 0
    hover_icon_on_border = false

    allow_tearing = false

    # Authenticator rules
    windowrule = dimaround,^(org.kde.polkit-kde-authentication-agent-1)$
    windowrule = stayfocused,^(org.kde.polkit-kde-authentication-agent-1)$

    windowrule = float,$win_float
    windowrule = rounding 10,$win_float

    # Keep to fractions of screen (1920/sa by 1200/sa, where s is scale (0.75), a is fraction of linear screen)
    windowrule = size 1280 800,$win_big # 1/2
    windowrule = size 853 533,$win_medium # ~1/3
    windowrule = size 512 320,$win_small # 1/5

    # Center cusor but keep full window onscreen
    windowrule = move onscreen cursor -50% -50%,$win_center_cursor

    # Opacity full when focused, less when unfocused
    windowrule = opacity 1.0 override 0.4 override,$win_opacity

    workspace = special:scratchpad, gapsin:0, gapsout:0
    workspace = special:notes, gapsin:0, gapsout:0
}


decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
	
	# multisample_edges = true
    rounding = 0
    
    active_opacity = 1.0
    fullscreen_opacity = 1.0
    inactive_opacity = 1.0

    drop_shadow = false
    shadow_range = 4
    shadow_render_power = 3
    col.shadow = $shadow

    dim_inactive = false
    dim_strength = 0.2
    dim_special = 0.2
    dim_around = 0.2

    blur {
        enabled = false
        size = 1
        passes = 1
        ignore_opacity = false
        new_optimizations = true
        xray = true
    }
}


animations {
    enabled = false
    first_launch_animation = false

    # Some default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}


dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = true # master switch for pseudotiling.
    
    force_split = 0
    preserve_split = true
    smart_split = false

    smart_resizing = true
}


group {
    col.border_active = $act_gro_bor
    col.border_inactive = $gro_bor
}


master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_is_master = true
}


gestures {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    workspace_swipe = true
    workspace_swipe_fingers = 4
    workspace_swipe_distance = 300
    workspace_swipe_invert = true
    workspace_swipe_numbered = false
}


xwayland {
	use_nearest_neighbor = false
	force_zero_scaling = true
}


misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0

    enable_swallow = false

    vfr = true
    vrr = 1

    mouse_move_enables_dpms = true
    key_press_enables_dpms = true

    always_follow_on_dnd = true
    
    cursor_zoom_factor = 1.0

    render_ahead_of_time = false
    render_ahead_safezone = 1

    no_direct_scanout = true

    hide_cursor_on_touch = true
}


debug {
    damage_tracking = 2

    damage_blink = false

    overlay = false
}
